(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{4685:(e,t,s)=>{Promise.resolve().then(s.bind(s,6215))},6215:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),l=s(5647),n=s(1890);let d=n.env.NEXT_PUBLIC_SUPABASE_URL,i=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,l.UU)(d,i);function c(){var e,t;let[s,l]=(0,r.useState)([]),[n,d]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(new Date),h=Array.from({length:7},(e,t)=>{let s=new Date(x),a=s.getDate()-s.getDay()+1;return s.setDate(a+t),s});return((0,r.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await o.from("sub_locations").select("id, name").gte("id",31).lte("id",35).order("id");if(t)throw t;let s=e.map(e=>({id:e.id,name:"스튜디오 ".concat(e.id-30),equipment:["PPT","전자칠판","일반칠판"]})),a=h[0].toISOString().split("T")[0],r=h[6].toISOString().split("T")[0],{data:n,error:i}=await o.from("shooting_schedules").select("*").eq("schedule_type","studio").gte("shoot_date",a).lte("shoot_date",r).order("shoot_date",{ascending:!0});if(i)throw i;l(s),d(n||[])}catch(e){console.error("데이터 로드 오류:",e)}finally{c(!1)}})()},[x]),i)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-gray-600",children:"데이터 로딩 중..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"스튜디오 스케줄"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"실시간 스튜디오 예약 관리"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=new Date(x);e.setDate(e.getDate()-7),m(e)},className:"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"이전"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded",children:[null==(e=h[0])?void 0:e.toLocaleDateString("ko-KR",{month:"long",day:"numeric"})," -",null==(t=h[6])?void 0:t.toLocaleDateString("ko-KR",{month:"long",day:"numeric"})]}),(0,a.jsx)("button",{onClick:()=>{let e=new Date(x);e.setDate(e.getDate()+7),m(e)},className:"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"다음"}),(0,a.jsx)("button",{onClick:()=>m(new Date),className:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"오늘"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"w-32 p-3 text-left border font-medium",children:"스튜디오"}),h.map((e,t)=>(0,a.jsxs)("th",{className:"w-40 p-3 text-center border",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.toLocaleDateString("ko-KR",{weekday:"short"})})]},t))]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"p-3 border bg-blue-50 font-medium text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-blue-800",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.equipment.join(", ")})]}),h.map((t,s)=>{let r=t.toISOString().split("T")[0],l=n.filter(t=>t.sub_location_id===e.id&&t.shoot_date===r);return(0,a.jsx)("td",{className:"p-2 border align-top min-h-[100px] cursor-pointer hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"space-y-1",children:[l.map(e=>(0,a.jsxs)("div",{className:"bg-white border rounded p-2 shadow-sm hover:shadow-md text-xs",children:[(0,a.jsxs)("div",{className:"font-bold",children:[e.start_time.slice(0,5),"-",e.end_time.slice(0,5)]}),(0,a.jsx)("div",{className:"text-gray-700",children:e.instructor_name}),(0,a.jsx)("div",{className:"text-gray-600",children:e.course_name}),(0,a.jsx)("div",{className:"px-1 rounded text-xs ".concat("approved"===e.approval_status?"bg-green-100 text-green-800":"pending"===e.approval_status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"approved"===e.approval_status?"승인":"pending"===e.approval_status?"대기":"취소"})]},e.id)),0===l.length&&(0,a.jsx)("div",{className:"text-xs text-gray-400 text-center py-8",children:"스케줄 등록"})]})},s)})]},e.id))})]})})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[647,441,202,358],()=>t(4685)),_N_E=e.O()}]);